/*==============================================================================

   ゲームシーン管理 [game.cpp]
														 Author :七島維吹
														 Date   :2025 06 02
--------------------------------------------------------------------------------

==============================================================================*/
#include "game.h"
#include"MIDIManager.h"
#include"input.h"
#include"fade.h"
#include"sound.h"
#include"MidiFile.h"
#include"MIDINotes.h"
#include"GUI.h"
#include<windows.h>
//*****************************************************************************
// マクロ定義
//*****************************************************************************



//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************


//*****************************************************************************
// グローバル変数
//*****************************************************************************

//=============================================================================
// 初期化処理
//=============================================================================

void Game::Init(void)
{
	MIDINotes::InitMIDINotes();
}

//=============================================================================
// 終了処理
//=============================================================================
void  Game::Uninit(void)
{
	MIDINotes::UninitMIDINotes();
}

//=============================================================================
// 更新処理
//=============================================================================
void  Game::Update()
{
	if (GUI::GetFileName() != "")
	{
		MIDIManager::ReadMIDI(GUI::GetFileName());
	}
	if (GUI::GetIsChange())
	{
		MIDIManager::MakeNotes();
		GUI::SetIsChange(false);
	}
	MIDINotes::UpdateMIDINotes();
	if (MIDIManager::GetIsPlay())
	{
		MIDIManager::StartActiveNotes(MIDIManager::GetPlayType());
	}
	
	if (GetKeyboardTrigger(DIK_RETURN))
	{
		Fade::SetFade(MODE_FADE::FADE_OUT);
	}
}

//=============================================================================
// 描画処理
//=============================================================================
void  Game::Draw()
{
	MIDINotes::DrawMIDINotes();
}

//================================================================================
//セット関数
//================================================================================

//================================================================================
//ゲッター関数
//================================================================================
